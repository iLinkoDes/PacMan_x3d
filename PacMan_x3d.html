<!DOCTYPE html>
<!-- ALUMNO: IAN RIVERO CARMONA-->
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Pac-Man en X3D</title>
  <script src="https://www.x3dom.org/download/x3dom.js"></script>
  <link rel="stylesheet" href="https://www.x3dom.org/download/x3dom.css">
  <script>
    // Optimize canvas context for frequent getImageData calls
    var originalGetContext = HTMLCanvasElement.prototype.getContext;
    HTMLCanvasElement.prototype.getContext = function(contextType, options) {
      if (contextType === '2d') {
        options = options || {};
        options.willReadFrequently = true;
      }
      return originalGetContext.call(this, contextType, options);
    };
  </script>
  <style>
    body {
      margin: 0;
      background-color: #111;
      color: white;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }
    #pantallaInicio, #pantallaGameOver, #contenedorJuego {
      position: absolute;
      inset: 0;
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
    #pantallaInicio, #pantallaGameOver {
      background: rgba(0,0,0,0.9);
      text-align: center;
      z-index: 2;
    }
    #pantallaGameOver { display: none; }
    button {
      margin-top: 16px;
      padding: 10px 20px;
      font-size: 1.1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background-color: #1976d2;
      color: white;
    }
    button:hover { background-color: #2196f3; }
    x3d {
      border: 2px solid #444;
      border-radius: 10px;
      background: #000;
    }
    #contenedorJuego {
        display: flex;
    }
  </style>
</head>
<body>

  <!-- Pantalla de inicio -->
  <div id="pantallaInicio">
    <h1>üöÄ Pac-Man en X3D üöó</h1>
    <p>Usa las flechas ‚Üê ‚Üë ‚Üì ‚Üí  para mover a Pac-Man a travez del nivel.<br>
       Cuidado con los fantasmas! <b>Continuar</b> o <b>Salir</b>.</p>
       <br>Alumno: Ian Rivero Carmona
    <button onclick="iniciarJuego()">Iniciar Juego</button>
  </div>

  <!-- Pantalla de Game Over -->
  <div id="pantallaGameOver">
    <h1>üí• ¬°Game Over!</h1>
    <p>¬øDeseas continuar o salir al men√∫ principal?</p>
    <div>
      <button onclick="reiniciarJuego()">Continuar</button>
      <button onclick="salirJuego()">Salir</button>
    </div>
  </div>

  <!-- Contenedor del juego -->
  <!-- <div id="contenedorJuego" style="display:none;">  <<<< REVERTIR PARE REAPARECER EL MENU -->
    <div id="contenedorJuego" style=""></div>
    <x3d id="escena" width="1200px" height="1200px">
      <scene>
        <background skyColor="0.1 0.1 0.3"></background>

        <!-- C√°mara superior (vista a√©rea) -->
        <Viewpoint position="0 13 0" orientation="1 0 0 -1.57" fieldOfView="1.2" description="Vista superior"></Viewpoint>

        <!-- Title Text -->
        <Transform translation="0 0.2 -8" rotation="1 0 0 -1.57">
          <Shape>
            <Appearance>
              <Material diffuseColor="1 1 1"></Material>
            </Appearance>
            <Text id="labelPosicion" string='"Position: 0, 0, 0"' solid="false">
              <FontStyle family='"SANS"' size="0.5"></FontStyle>
            </Text>
          </Shape>
        </Transform>

        <!-- Suelo -->
        <Shape>
          <Appearance>
            <Material diffuseColor="0.1 0.6 0.1"></Material>
          </Appearance>
          <Box size="12 0.1 16"></Box>
        </Shape>

        <!-- Jugador (PacMan) -->
        <Transform id="Jugador" translation="0 0 0">
          <Shape>
            <Appearance><Material diffuseColor="0.2 0.2 1"></Material></Appearance>
            <Box size="0.5 0.5 0.5"></Box>
          </Shape>
        </Transform>

        <!-- Escenario -->
         <Transform id="MuroSpawn1" translation="0 0 1">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="2.5 0.5 0.5"></Box>
            </Shape>
         </Transform>
         <Transform id="MuroSpawn2" translation="-1 0 0">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 1.5"></Box>
            </Shape>
         </Transform>
        <Transform id="MuroSpawn3" translation="1 0 0">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 1.5"></Box>
            </Shape>
         </Transform>
        <Transform id="MuroSpawn4" translation="0.75 0 -1">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1 0.5 0.5"></Box>
            </Shape>
         </Transform>
        <Transform id="MuroSpawn5" translation="-0.75 0 -1">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1 0.5 0.5"></Box>
            </Shape>
         </Transform>

         <!-- Muros Exteriores del Spawn -->

         <Transform id="Muro1" translation="-1 0 -2">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1.5 0.5 0.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro2" translation="1 0 -2">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1.5 0.5 0.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro3" translation="2 0 -1.25">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 2"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro4" translation="2 0 1.25">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 2"></Box>
            </Shape>
         </Transform>

         <Transform id="Muro5" translation="-1 0 2">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1.5 0.5 0.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro6" translation="1 0 2">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1.5 0.5 0.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro7" translation="-2 0 -1.25">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 2"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro8" translation="-2 0 1.25">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 2"></Box>
            </Shape>
         </Transform>

         <Transform id="Muro9" translation="-1.25 0 -3">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="2 0.5 0.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro10" translation="1.25 0 -3">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="2 0.5 0.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro11" translation="-1.25 0 3">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="2 0.5 0.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro12" translation="1.25 0 3">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="2 0.5 0.5"></Box>
            </Shape>
         </Transform>

         <!-- LATERAL IZQUIERDO -->

        <Transform id="Muro13" translation="-3 0 0">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 6.5"></Box>
            </Shape>
         </Transform>
         
        <Transform id="Muro13" translation="3 0 0">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 6.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro16" translation="-4.25 0 2">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1 0.5 2.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro18" translation="-4.25 0 -2">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1 0.5 2.5"></Box>
            </Shape>
         </Transform>

         <!-- LATERAL DERECHO -->

        <Transform id="Muro14" translation="-3.75 0 0">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="2 0.5 0.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro15" translation="3.75 0 0">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="2 0.5 0.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro17" translation="4.25 0 2">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1 0.5 2.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro19" translation="4.25 0 -2">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1 0.5 2.5"></Box>
            </Shape>
         </Transform>

         <!-- PARTE SUPERIOR -->

         <Transform id="Muro20" translation="-2.5 0 -4">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1.5 0.5 0.5"></Box>
            </Shape>
         </Transform>

         <Transform id="Muro21" translation="0 0 -4">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="2.5 0.5 0.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro22" translation="2.5 0 -4">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1.5 0.5 0.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro23" translation="-4.25 0 -5.25">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1 0.5 3"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro24" translation="4.25 0 -5.25">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="1 0.5 3"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro25" translation="-3 0 -5.75">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 2"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro26" translation="-2 0 -5.75">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 2"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro27" translation="-1 0 -5.5">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 2.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro28" translation="0 0 -5.75">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 2"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro29" translation="1 0 -5.5">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 2.5"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro25" translation="3 0 -5.75">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 2"></Box>
            </Shape>
         </Transform>

        <Transform id="Muro26" translation="2 0 -5.75">
            <Shape>
              <Appearance><Material diffuseColor="0.5 0.5 0.5"></Material></Appearance>
              <Box size="0.5 0.5 2"></Box>
            </Shape>
         </Transform>


        <!-- Obst√°culo (cubo rojo, mismo tama√±o) -->
        <!-- <Transform id="Obstaculo" translation="0 0.3 -3">
          <Shape>
            <Appearance><Material diffuseColor="1 0 0"></Material></Appearance>
            <Box size="0.5 0.5 0.5"></Box>
          </Shape>
        </Transform> -->

      </scene>
    </x3d>
  </div>

  <script>
    // === VARIABLES DE ESTADO ===
    let gameActivo = false;
    let animationId = null;

    // Jugador
    let posX = 0;
    let posZ = 0;
    const JUGADOR_Y = 0.3;
    const JUGADOR_Z = 0;

    // Posicion inicial matriz
    let matrizX = 14;
    let matrizZ = 10;

    // Obst√°culo
    let obsZ = -3;
    let obsDir = 1;

    let obs2Z = -2;
    let obs2Dir = 1;

    let obs3Z = -1;
    let obs3Dir = 1;
    const OBS_SPEED = 2.2; // unidades/seg
    const OBS_MIN_Z = -3, OBS_MAX_Z = 3;

    // L√≠mites para colisi√≥n frontal
    const COL_X = 0.25; // debe estar casi centrado
    const COL_Z = 0.5;  // distancia frontal

    // Control de tiempo
    let lastTs = 0;

    // === FUNCIONES ===

    function iniciarJuego() {
      document.getElementById("pantallaInicio").style.display = "none";
      document.getElementById("pantallaGameOver").style.display = "none";
      document.getElementById("contenedorJuego").style.display = "flex";
      iniciarEscena();
    }

    function reiniciarJuego() {
      document.getElementById("pantallaGameOver").style.display = "none";
      iniciarEscena();
    }

    function salirJuego() {
      document.getElementById("pantallaGameOver").style.display = "none";
      document.getElementById("contenedorJuego").style.display = "none";
      document.getElementById("pantallaInicio").style.display = "flex";
      detenerAnimacion();
    }

    function iniciarEscena() {
      gameActivo = true;
      posX = 0;
      posZ = 0;
      obsZ = -3;
      obs2Z = -1;
      obs3Z = -2; 
      obsDir = 1;
      lastTs = 0;

      // Reinicia posiciones
      //document.getElementById("Jugador").setAttribute("translation", `${posX} ${JUGADOR_Y} ${JUGADOR_Z}`);
      //document.getElementById("Obstaculo").setAttribute("translation", `0 ${JUGADOR_Y} ${obsZ}`);
      //document.getElementById("EsferaObstaculo").setAttribute("translation", `-1 ${JUGADOR_Y} ${obs2Z}`);
      //document.getElementById("ConoObstaculo").setAttribute("translation", `1 ${JUGADOR_Y} ${obs3Z}`);

      detenerAnimacion();
      animationId = requestAnimationFrame(loop);
    }

    function detenerAnimacion() {
      if (animationId !== null) {
        cancelAnimationFrame(animationId);
        animationId = null;
      }
    }

    // Animaci√≥n principal
    function loop(ts) {
      if (!gameActivo) return;
      if (!lastTs) lastTs = ts;
      const dt = (ts - lastTs) / 1000; // segundos
      lastTs = ts;

      // Movimiento del obst√°culo
      //obsZ += obsDir * OBS_SPEED * dt;
      //if (obsZ > OBS_MAX_Z) { obsZ = OBS_MAX_Z; obsDir = -1; }
      //if (obsZ < OBS_MIN_Z) { obsZ = OBS_MIN_Z; obsDir = 1; }

      //obs2Z += obs2Dir * OBS_SPEED * dt;
      //if (obs2Z > OBS_MAX_Z) { obs2Z = OBS_MAX_Z; obs2Dir = -1; }
      //if (obs2Z < OBS_MIN_Z) { obs2Z = OBS_MIN_Z; obs2Dir = 1; }

      //obs3Z += obs3Dir * OBS_SPEED * dt;
      //if (obs3Z > OBS_MAX_Z) { obs3Z = OBS_MAX_Z; obs3Dir = -1; }
      //if (obs3Z < OBS_MIN_Z) { obs3Z = OBS_MIN_Z; obs3Dir = 1; }

      // Spawnea los obst√°culos

      //document.getElementById("Obstaculo").setAttribute("translation", `0 ${JUGADOR_Y} ${obsZ}`);
      //document.getElementById("EsferaObstaculo").setAttribute("translation", `-1 ${JUGADOR_Y} ${obs2Z}`);
      //document.getElementById("ConoObstaculo").setAttribute("translation", `1 ${JUGADOR_Y} ${obs3Z}`);

      // --- Detecci√≥n de colisi√≥n frontal ---
      const dx = Math.abs(posX - 0);     // obst√°culo siempre en X=0
      //const dx2 = Math.abs(posX - (-1)); // esfera en X=-1
      //const dx3 = Math.abs(posX - 1);    // cono en X=
      const dz = Math.abs(JUGADOR_Z - obsZ);
      //const dz2 = Math.abs(JUGADOR_Z - obs2Z);
      //const dz3 = Math.abs(JUGADOR_Z - obs3Z);

      // Solo colisi√≥n si est√°n casi centrados en X y cercanos en Z
      //if ((dx1 < COL_X && dz1 < COL_Z) ||
      //    (dx2 < COL_X && dz2 < COL_Z) ||
      //    (dx3 < COL_X && dz3 < COL_Z)) {
      if (dx < COL_X && dz < COL_Z){
        gameActivo = false;
        detenerAnimacion();
        document.getElementById("pantallaGameOver").style.display = "flex";
        return;
      }

      animationId = requestAnimationFrame(loop);
    }

    const matriz = [ [11,13,13,9,13,9,13,9,13,9,13,9,13,9,13,9,13,9,13,13,10] , [4,0,0,4,0,4,0,4,0,4,0,4,0,4,0,4,0,4,0,0,4] , [4,0,0,4,0,4,0,4,0,4,0,4,0,4,0,4,0,4,0,0,4] , [4,0,0,4,0,4,0,4,0,4,0,4,0,4,0,4,0,4,0,0,4] , [4,0,0,4,0,4,0,4,0,4,0,4,0,4,0,4,0,4,0,0,4] , [4,0,0,3,13,5,13,2,0,7,13,6,0,3,13,5,13,2,0,0,4] , [4,0,0,4,0,0,0,4,0,0,0,0,0,4,0,0,0,4,0,0,4] , [3,13,13,1,13,9,13,5,13,13,9,13,13,5,13,9,13,1,13,13,2] , [4,0,0,4,0,4,0,0,0,0,4,0,0,0,0,4,0,4,0,0,4] , [4,0,0,4,0,3,13,13,13,13,1,13,13,13,13,2,0,4,0,0,4] , [4,0,0,4,0,4,0,0,0,0,4,0,0,0,0,4,0,4,0,0,4] , [4,0,0,4,0,4,0,11,13,13,1,13,13,10,0,4,0,4,0,0,4] , [4,0,0,4,0,4,0,4,0,0,4,0,0,4,0,4,0,4,0,0,4] , [3,13,13,6,0,4,0,4,0,11,1,10,0,4,0,4,0,7,13,13,2] , [4,0,0,0,0,3,13,2,0,3,1,2,0,3,13,2,0,0,0,0,4] , [3,13,13,10,0,4,0,4,0,7,5,6,0,4,0,4,0,11,13,13,2] , [4,0,0,4,0,4,0,4,0,0,0,0,0,4,0,4,0,4,0,0,4] , [4,0,0,4,0,4,0,7,13,13,9,13,13,6,0,4,0,4,0,0,4] , [4,0,0,4,0,4,0,0,0,0,4,0,0,0,0,4,0,4,0,0,4] , [4,0,0,4,0,3,13,13,13,13,1,13,13,13,13,2,0,4,0,0,4] , [4,0,0,4,0,4,0,0,0,0,4,0,0,0,0,4,0,4,0,0,4] , [3,13,13,5,13,5,13,13,13,13,1,13,13,13,13,5,13,5,13,13,2] , [4,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,4] , [3,13,13,13,13,9,13,13,13,13,1,13,13,13,13,9,13,13,13,13,2] , [4,0,0,0,0,4,0,0,0,0,4,0,0,0,0,4,0,0,0,0,4] , [4,0,0,0,11,6,0,0,0,0,4,0,0,0,0,7,10,0,0,0,4] , [4,0,0,11,6,0,0,0,0,0,4,0,0,0,0,0,7,10,0,0,4] , [4,0,11,2,0,0,0,0,0,0,4,0,0,0,0,0,0,3,10,0,4] , [7,13,5,5,13,13,13,13,13,13,5,13,13,13,13,13,13,5,5,13,6] ]


    let valorMatriz = matriz[matrizX][matrizZ];

    // Movimiento del jugador
    document.addEventListener("keydown", (e) => {
      if (!gameActivo) return;
      const jugador = document.getElementById("Jugador");
      if (e.key === "ArrowRight" && (valorMatriz == 1 || valorMatriz == 3 || valorMatriz == 5 || valorMatriz == 7 || valorMatriz == 9 || valorMatriz == 11 || valorMatriz == 13 || valorMatriz == 15)){
         posX += 0.5;
         matrizZ += 1;
         valorMatriz = matriz[matrizX][matrizZ]
      }
      if (e.key === "ArrowLeft"  && (valorMatriz == 1 || valorMatriz == 2 || valorMatriz == 5 || valorMatriz == 6 || valorMatriz == 9 || valorMatriz == 10 || valorMatriz == 13 || valorMatriz == 14)){
        posX -= 0.5;
        matrizZ -= 1;
        valorMatriz = matriz[matrizX][matrizZ]
      } 
      if (e.key === "ArrowUp" && (valorMatriz == 1 || valorMatriz == 2 || valorMatriz == 3 || valorMatriz == 4 || valorMatriz == 5 || valorMatriz == 6 || valorMatriz == 7 || valorMatriz == 8)){
         posZ -= 0.5;
        matrizX -= 1;
        valorMatriz = matriz[matrizX][matrizZ]
      }
      if (e.key === "ArrowDown"  && (valorMatriz == 1 || valorMatriz == 2 || valorMatriz == 3 || valorMatriz == 4 || valorMatriz == 9 || valorMatriz == 10 || valorMatriz == 11 || valorMatriz == 12)){
         posZ += 0.5;
        matrizX += 1;
        valorMatriz = matriz[matrizX][matrizZ]
      }
      jugador.setAttribute("translation", `${posX} ${JUGADOR_Y} ${posZ}`);
    });

    
    // Actualiza el label con las coordenadas actuales del jugador
    function actualizarEtiqueta() {
    const textNode = document.querySelector('#labelPosicion');
    if (textNode) {
        textNode.setAttribute(
          'string',
          `"X: ${posX.toFixed(1)}, Y: ${JUGADOR_Y.toFixed(1)}, Z: ${posZ.toFixed(1)} Matriz: ${valorMatriz}"`
        );
    }
    }

    // Llamar a funcion en el bucle del juego (por ejemplo, en requestAnimationFrame o en tu funci√≥n de actualizaci√≥n)
    setInterval(actualizarEtiqueta, 100); // Update every 100ms

    // Activa la escena al cargar la pagina, desactivar al terminar debug
    iniciarEscena();
  </script>
</body>
</html>